{"version":3,"sources":["network/index.js","services/users.js","components/commons/input/index.js","components/searchPage/suggestions/index.js","components/searchPage/noUserFound/index.js","components/commons/closeButton/index.js","components/searchPage/index.js","utils/filter.js","components/core/App.js","index.js"],"names":["errorObject","res","a","json","body","error","Error","errorMessage","statusCode","status","statusText","dynMsg","code","errorCode","validateResponse","resp","ok","headers","data","getUsers","fetch","then","searchQuery","onChange","onKeyDown","id","htmlFor","name","data-testid","className","length","autoComplete","aria-label","placeholder","value","autoFocus","state","setHover","searchedUsers","hoveredItem","role","map","item","key","aria-selected","onMouseOver","items","filter","k","toLowerCase","indexOf","address","visible","onClickHandler","onClick","width","height","focusable","xmlns","viewBox","d","initialState","users","useReducer","newState","setState","delayedFilter","_","debounce","q","filteredUsers","list","pincode","searchUsers","reset","onKeyDownHandler","keyCode","i","useEffect","currentItem","document","getElementById","scrollIntoView","behavior","block","inline","console","currentTarget","e","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1a0a1bda.chunk.js","sourcesContent":["const errorObject = async (res) => {\n  const body = await res.json();\n  const error = new Error(body.errorMessage || body.error || body);\n  error.statusCode = res.status;\n  error.statusText = res.statusText;\n  error.dynMsg = { ...body.dynMsg };\n  error.code = body.errorCode;\n  throw error;\n};\n\nexport const validateResponse = async (resp) => {\n  if (!resp.ok) return errorObject(resp);\n  return {\n    headers: resp.headers,\n    data: await resp.json()\n  };\n};\n","\nimport { validateResponse } from '../network'\n\nexport const getUsers = async () => {\n  return fetch('https://www.mocky.io/v2/5ba8efb23100007200c2750c')\n    .then(validateResponse)\n    .then((resp) => resp.data);\n};\n","import React from 'react';\nimport './style.css';\n\nexport default ({ searchQuery, onChange, onKeyDown }) => (\n  <div id=\"searchField\">\n    <label htmlFor=\"search\">Search Button</label>\n    <input\n      id=\"search\"\n      name=\"search\"\n      data-testid=\"search-input\"\n      className={\"searchInput \" + (searchQuery.length ? 'active' : '')}\n      autoComplete=\"off\"\n      onChange={onChange}\n      onKeyDown={onKeyDown}\n      aria-label=\"Search users by ID, address, name, pincode, etc\"\n      placeholder=\"Search users by ID, address, name, pincode, etc\"\n      value={searchQuery}\n      autoFocus />\n  </div>\n);\n\n","import React from 'react';\nimport './style.css';\n\nexport default ({state, setHover}) => {\n  const { searchedUsers, hoveredItem, searchQuery } = state;\n  return(\n    <div id=\"search-autocomplete\" className=\"autocomplete-suggestions\">\n      <div id=\"results\" role=\"listbox\">\n        {searchedUsers.map((item, id)=>(\n          <div className={\"suggestion \" + (hoveredItem === id ? 'active' : '')}\n            key={item.id}\n            id={`suggestion${id}`}\n            role=\"option\"\n            aria-selected={hoveredItem === id}\n            onMouseOver={()=>{setHover({hoveredItem: id});}}\n          >\n            <div className=\"bold\">{item.id}</div>\n            <div className=\"italics pad025\">{item.name}</div>\n            {item.items.filter((k)=>~k.toLowerCase().indexOf(searchQuery)).length > 0 && (<div><ul><li>{`\"${searchQuery}\" found in items`}</li></ul></div>)}\n            <div className=\"pad025\">{item.address}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n};\n\n\n\n","import React from 'react';\nimport './style.css';\n\nexport default () => (\n  <div id=\"no-results\" className=\"noUser\" role=\"listbox\">\n    No User Found\n  </div>\n);\n\n","import React from 'react';\nimport './style.css';\n\nexport default ({ visible, onClickHandler }) => (\n  <span className={\"closeIcon \" + (visible ? '' : 'hidden')} onClick={onClickHandler}>\n    <svg width=\"25px\" height=\"25px\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg>\n  </span>\n);\n\n","import React, { useReducer, useEffect } from 'react';\nimport { getUsers } from '../../services/users';\nimport { filterData as searchUsers } from '../../utils/filter';\nimport Input from '../commons/input';\nimport Suggestion from './suggestions';\nimport NoUser from './noUserFound';\nimport ClearSearch from '../commons/closeButton';\nimport _ from \"lodash\";\nimport './style.css';\n\nconst initialState = {\n  users: [],\n  searchQuery: '',\n  searchedUsers: [],\n  hoveredItem: -1\n};\n\nexport default () => {\n  const [state, setState] = useReducer((state, newState) => ({ ...state, ...newState }), initialState);\n\n  const delayedFilter = _.debounce(q => {\n    const filteredUsers = searchUsers(state.users, q);\n    setState({searchedUsers: filteredUsers});\n  }, 500);\n\n  const reset = () => { setState({searchQuery: '', searchedUsers: [], hoveredItem: -1}); }\n\n  const onChangeHandler = ({ currentTarget: { value } }) => {\n    if (value.length) {\n      setState({searchQuery: value, hoveredItem: -1});\n      delayedFilter(value);\n    } else {\n      reset();\n    }\n  };\n\n  const moveDown = () => {\n    if(state.hoveredItem < state.searchedUsers.length-1) { setState({hoveredItem: state.hoveredItem+1}); }\n    else if(state.hoveredItem === state.searchedUsers.length-1) { setState({hoveredItem: 0}); }\n  }\n\n  const moveUp = () => {\n    if(state.hoveredItem > 0) { setState({hoveredItem: state.hoveredItem-1}); } \n    else if(state.hoveredItem === 0) { setState({hoveredItem: state.searchedUsers.length-1}); } \n  }\n\n  const onKeyDownHandler = ({ keyCode }) => {\n    keyCode===40 && moveDown();\n    keyCode===38 && moveUp();\n    if (keyCode===13) {\n      const i = state.hoveredItem > -1 ? state.hoveredItem : 0;\n      setState({\n        searchQuery: state.searchedUsers[i].name,\n        searchedUsers: [],\n        hoveredItem: -1\n      });\n    }\n  }\n\n  useEffect(() => {\n    const currentItem = document.getElementById(`suggestion${state.hoveredItem}`);\n    currentItem && currentItem.scrollIntoView({behavior: \"smooth\", block: \"end\", inline: \"nearest\"});\n    return () => {}\n  }, [state.hoveredItem])\n  \n  useEffect(() => {\n    (async () => {\n      try {\n        const resp = await getUsers();\n        setState({users: resp});\n      } catch (error) {\n        console.error(error);\n      }\n    })();\n  }, [])\n  \n  return (\n    <>\n      <ClearSearch visible={state.searchQuery.length>0} onClickHandler={reset} />\n      <main className=\"container\">\n        <Input searchQuery={state.searchQuery} onChange={onChangeHandler} onKeyDown={(e) => onKeyDownHandler(e)} />\n        {state.searchedUsers.length > 0 && (<Suggestion state={state} setHover={setState} />)}\n        {(state.searchQuery.length>0 && state.searchedUsers.length<1) && (<NoUser />)}\n      </main>\n    </>\n  )\n};\n","export const filterData = (list, q) => {\n  return list.filter((item) => {\n    const { id, name, items, address, pincode } = item;\n    return ~id.toLowerCase().indexOf(q) || \n      ~name.toLowerCase().indexOf(q) || \n      ~address.toLowerCase().indexOf(q) || \n      ~pincode.toLowerCase().indexOf(q) || \n      items.filter((k)=>~k.toLowerCase().indexOf(q)).length\n  });\n}\n","import React from 'react';\nimport './App.css';\nimport SearchPage from '../searchPage';\n\nfunction App() {\n  return (\n    <div className=\"text-center\">\n      <header><h1>Locus Assignment</h1></header>\n      <SearchPage />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/core/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}